<!DOCTYPE html>
  <html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transi√ß√£o 3D para Conte√∫do</title>

    <!-- Fonte diferenciada -->
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
  
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="container3D"></div>

    <!-- Conte√∫do da Loja -->
    <div id="conteudo" class="hidden overflow-x-hidden">
<!-- ===== HEADER MARCELINO'S ===== -->
<header class="site-header w-full shadow-md fixed top-0 left-0 z-50">
  <div class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between">
    
    <!-- Logo -->
    <h1 class="text-3xl font-bold font-[Lobster] ">
      Marcelino's
    </h1>

    <!-- Bot√£o do menu mobile -->
    <button id="menu-toggle" class="md:hidden text-yellow-400 focus:outline-none text-3xl">
      ‚ò∞
    </button>

    <!-- Navega√ß√£o -->
   <nav id="menu" class="hidden md:flex flex-wrap items-center gap-3 text-lg font-semibold">
  <a href="Marcelinostestes/teste_pagina.html" class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition">Home</a>
  <a href="#produtos" class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition">Produtos</a>
  <a href="#promoCarousel" class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition">Promo√ß√µes</a>
  <a href="#abtus" class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition">Sobre</a>
  <a href="#faqQ" class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition">FAQ</a>
  <a href="../avaliacao.html" class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition">Avalia√ß√£o</a>
<a href="../cadastro/login.html" class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition">Login</a>

<button id="logoutBtn"
class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition text-white">
Logout
</button>

</nav>

  </div>

  <!-- Menu colaps√°vel (mobile) -->
  <div id="mobile-menu" class="hidden flex-col items-center bg-[#7B4B24] md:hidden pb-4">
 <a href="Marcelinostestes/teste_pagina.html" class="block w-full text-center py-2 border-b border-[#985600] hover:bg-[#985600]">Home</a>
  <a href="#produtos" class="block w-full text-center py-2 border-b border-[#985600] hover:bg-[#985600]">Produtos</a>
  <a href="#promoCarousel" class="block w-full text-center py-2 border-b border-[#985600] hover:bg-[#985600]">Promo√ß√µes</a>
  <a href="#abtus" class="block w-full text-center py-2 border-b border-[#985600] hover:bg-[#985600]">Sobre</a>
  <a href="#faqQ" class="block w-full text-center py-2 border-b border-[#985600] hover:bg-[#985600]">FAQ</a>
  <a href="../avaliacao.html" class="block w-full text-center py-2 border-b border-[#985600] hover:bg-[#985600]">Avalia√ß√£o</a>
<a href="../cadastro/login.html" class="block w-full text-center py-2 border-b border-[#985600] hover:bg-[#985600]">Login</a>

<button id="logoutBtn"
class="px-4 py-2 rounded-lg bg-[#AB2D0A] hover:bg-[#d4a017] transition text-white">
Logout
</button>
  </div>
</header>
<script>
// =============== MENU HAMB√öRGUER ===============
document.addEventListener("DOMContentLoaded", () => {
  const menu = document.getElementById("menu");               // menu desktop
  const mobileMenu = document.getElementById("mobile-menu");  // menu mobile
  const menuToggle = document.getElementById("menu-toggle");  // bot√£o hamb√∫rguer

  if (!menuToggle || !mobileMenu) {
    console.error("Erro: IDs 'menu-toggle' ou 'mobile-menu' n√£o encontrados.");
    return;
  }

  // Abre / Fecha o menu mobile
  menuToggle.addEventListener("click", (event) => {
    event.stopPropagation(); // evita fechar ao clicar no pr√≥prio bot√£o
    mobileMenu.classList.toggle("hidden");
  });

  // Fecha ao clicar nos links
  mobileMenu.querySelectorAll("a").forEach(link => {
    link.addEventListener("click", () => {
      mobileMenu.classList.add("hidden");
    });
  });

  // Fecha ao clicar fora
  document.addEventListener("click", (event) => {
    const clickedOutsideButton = !menuToggle.contains(event.target);
    const clickedOutsideMenu = !mobileMenu.contains(event.target);

    if (clickedOutsideButton && clickedOutsideMenu) {
      mobileMenu.classList.add("hidden");
    }
  });
});
</script>


  <!-- Adicione um espa√ßamento para compensar o header fixo -->
<div class="h-[80px]"></div>


      <!-- Grid de Conte√∫do -->
      <div class="grid gap-4 p-4 forma" style="grid-template-columns: 49% 59%;">
        <!-- Coluna esquerda -->
        <div class="flex flex-col rounded-xl items-center justify-center">
          <div style="width: 50%;" class="mt-4 ">
            <h3 class="text-yellow-500 text-6xl font-bold">Bem Vindo a Marcelino's</h3>
            <p class="text-white text-2xl font-bold mt-4">Aqui voc√™ encontra comidas frescas e apetitosas!</p>
            <div class="p-3 rounded-lg mt-5 btn-ver"><button class="verMais">Ver Mais</button></div>
          </div>
        </div>

        <!-- Coluna direita: Carrossel 3D -->
        <div class="sla flex items-center justify-center z-0 overflow-hidden relative">
          <div class="background-shape absolute">
          </div>

          <div class="relative w-full h-124 perspective-1000 overflow-hidden">
  <div id="carousel3D" class="w-full h-full relative transform-style-preserve-3d transition-transform duration-700" >
    <!-- Itens do carrossel -->
    <div class="absolute w-full h-full flex items-center justify-center" style="transform: rotateX(0deg) translateZ(200px); backface-visibility: hidden;">
      <img src="img/bom.webp" class="md:w-70 w-1/2 nsei" alt="">
    </div>
    <div class="absolute w-full h-full flex items-center justify-center" style="transform: rotateX(90deg) translateZ(200px); backface-visibility: hidden;">
      <img src="img/bom2.png" class="md:w-70 w-1/2 nsei" alt="">
    </div>
    <div class="absolute w-full h-full flex items-center justify-center" style="transform: rotateX(180deg) translateZ(200px); backface-visibility: hidden;">
      <img src="img/bom.webp" class="md:w-67 w-1/2 nsei" alt="">
    </div>
    <div class="absolute w-full h-full flex items-center justify-center" style="transform: rotateX(270deg) translateZ(200px); backface-visibility: hidden;">
      <img src="img/bom2.png" class="md:w-70 w-1/2 nsei" alt="">
    </div>
  </div>

  <!-- Bot√µes -->
  <button id="prev3D" class="absolute left-2 top-1/2 -translate-y-1/2 text-3xl z-10" style="display: none;">&#10094;</button>
  <button id="next3D" class="absolute right-2 top-1/2 -translate-y-1/2 text-3xl z-10">&#10095;</button>
</div>

<script>
const carousel = document.getElementById('carousel3D');
let currentIndex = 0;
const items = 4; // n√∫mero de itens
const rotateAmount = 90; // 360 / 4

document.getElementById('next3D').addEventListener('click', () => {
  currentIndex = (currentIndex + 1) % items;
  carousel.style.transform = `rotateX(${-currentIndex * rotateAmount}deg)`;
});

document.getElementById('prev3D').addEventListener('click', () => {
  currentIndex = (currentIndex - 1 + items) % items;
  carousel.style.transform = `rotateX(${-currentIndex * rotateAmount}deg)`;
});






  // Fun√ß√£o de logout
  function logout() {
    // Remove os dados do usu√°rio do localStorage
    localStorage.removeItem("isLoggedIn");
    localStorage.removeItem("emailUsuario");
    localStorage.removeItem("nomeUsuario"); // se voc√™ estiver armazenando tamb√©m

    // Mensagem de confirma√ß√£o
    alert("Voc√™ saiu com sucesso!");

    // Redireciona para a p√°gina de login
    window.location.href = "../cadastro/login.html";
  }





</script>


          <!-- Bot√µes -->
          <button id="prev3D" style="display: none;">&#10094;</button>
          <button id="next3D" style="display: none;">&#10095;</button>
        </div>
      </div>
      <div class="flex flex-col rounded-xl items-center justify-center mt-4">
        <div class="carousel-container">
          <button class="arrow left" style="display: none;">&#10094;</button>
          <!-- Promo√ß√µes: container √∫nico para inserir os cards de promo√ß√£o -->
          <div class="carousel" id="promoCarousel"></div>
          <button class="arrow right" style="display: none;">&#10095;</button>
        </div>
      </div>

  <!-- Se√ß√£o FAQ -->
 
    
    <!-- === Scripts === -->
    

      <!-- Conte√∫do adicional da loja -->
      <div class=" flex flex-col md:flex-row gap-2 p-4 pt-8 items-center justify-center overflow-hidden mb-6" style="padding-top: 15vh;">

    
<div class="pessoa flex justify-center items-center h-full pt-6">
  <img id="abtusImg" src="https://www.caixa.gov.br/PublishingImages/Paginas/LT_T015/header_330x315.png" alt="Imagem Sobre N√≥s" class="mx-auto">
</div>

        <section class="py-8 px-4 md:px-12  text-[#3b2a1a  mt-5">
          <div class="max-w-5xl mx-auto text-center">
            <h2 class="text-5xl font-bold mb-2" style="font-family: 'Lobster', cursive;">
              Mais Que Uma Conveni√™ncia
            </h2>
            <p class="text-3xl max-w-xl mx-auto mb-6 text-[#4b3825] leading-relaxed" id="abtus">
            
            </p>
          </div>
        </section>
        
        
      <!-- Banner carousel (pulled from Supabase 'banners' table) -->
     
        <!-- ===== Footer Marcelino's Conveni√™ncia ===== -->

      </div> 
      <!-- Carrinho Interno -->
<div id="cartPanel" class="cart-panel">
  <div class="cart-header">
    <h2>Carrinho</h2>
    <button id="closeCart" class="close-cart">X</button>
  </div>

  <div id="cartItems" class="cart-items"></div>

  <div class="cart-user-info">
    <label>Nome:</label>
    <input type="text" id="userName" placeholder="Seu nome">

    <label>Endere√ßo:</label>
    <input type="text" id="userAddress" placeholder="Seu endere√ßo">

    <label>Forma de Pagamento:</label>
    <select id="paymentMethod">
      <option value="Cart√£o">Cart√£o</option>
      <option value="Dinheiro">Dinheiro</option>
      <option value="PIX">PIX</option>
    </select>
  </div>

  <button id="finishOrder" class="finish-order">Finalizar Pedido</button>
</div>

<!-- Bot√£o para abrir o carrinho -->
<button id="openCart" class="open-cart-btn">üõí Carrinho</button>

      <section class="banner-carousel-container" aria-label="Carrossel de banners" style="width:100%; max-width:1100px; margin: 30px auto;">
        <button class="arrow left" id="bannerPrev" aria-label="Banner anterior" style="background:var(--accent); display: none;">&#10094;</button>
        <div class="banner-carousel" id="bannerCarousel" role="list" aria-live="polite" style="padding:8px 48px;"></div>
        <button class="arrow right" id="bannerNext" aria-label="Pr√≥ximo banner" style="background:var(--accent); display: none;">&#10095;</button>
      </section>

       <div class="faq-container" style="width: 70%; margin: 50px auto; display: flex; flex-direction: column; align-items: center;  padding: 30px 20px; border-radius: 12px; margin-top: 10vw; margin-bottom: 10vw;">
  <h2 style="font-family: 'Lobster', cursive; color: #AB2D0A; font-size: 4vw; line-height:1;padding-bottom: 3vh;">Perguntas Frequentes</h2>
    <div id="faqQ" style="width: 100%;"></div>
  </div>

      
      <div class="flex flex-col md:flex-row rounded-xl items-center justify-evenly mt-1 gap-4" style="margin-top: 10vh;">
          <img src="img/freepik__expand__4531.png" alt="" class=" md:w-1/4 w-1/2 rounded rounded-lg border border-yellow-300">
          <img src="img/Beige and Brown Clean Aesthetic Food Instagram Post.png" alt="" class=" md:w-1/4 w-1/2 rounded rounded-lg border border-yellow-300">
          <img src="img/Brown and Beige Simple Food Basic Frame Video Ad.jpg" alt="" class=" md:w-1/4 w-1/2 rounded rounded-lg border border-yellow-300">
        </div>


      <footer class="footer-marcelinos">
    <div class="footer-container">
      <div class="footer-logo">
        <h2>Marcelino's Conveni√™ncia</h2>
        <p>O melhor da cidade ‚Äî bebidas geladas, lanches e aquele atendimento de confian√ßa!</p>
      </div>

      <div class="footer-links">
        <h3>Links R√°pidos</h3>
        <ul>
          <li><a href="#">In√≠cio</a></li>
          <li><a href="#">Produtos</a></li>
          <li><a href="#">Promo√ß√µes</a></li>
          <li><a href="#">Sobre N√≥s</a></li>
          <li><a href="#">Contato</a></li>
        </ul>
      </div>

      <div class="footer-contact">
        <h3>Contato</h3>
        <p>üìç Rua das Ac√°cias, 123 - Centro</p>
        <p>üìû (34) 99999-1234</p>
        <p>‚è∞ Seg a Dom: 08h - 00h</p>
      </div>

      <div class="footer-social">
        <h3>Redes Sociais</h3>
        <div class="social-icons">
          <a href="#" title="Instagram"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram"></a>
          <a href="#" title="Facebook"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook"></a>
          <a href="#" title="WhatsApp"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp"></a>
        </div>
    </div>

    <div class="footer-bottom">
      <p>¬© 2025 Marcelino's Conveni√™ncia ‚Äî Todos os direitos reservados.</p>
    </div>
  </footer>

      </div>
    </div>

    <!-- Script do Carrossel 3D cont√≠nuo -->
    <script>
      const carousel3D = document.getElementById('carousel3D');
      let rotationX = 0; // √¢ngulo acumulativo
      const rotateStep = 90; // cada item 90¬∞

      function rotateNext() {
        rotationX -= rotateStep;
        carousel3D.style.transform = `translateZ(200px) rotateX(${rotationX}deg)`;
      }

      function rotatePrev() {
        rotationX += rotateStep;
        carousel3D.style.transform = `translateZ(200px) rotateX(${rotationX}deg)`;
      }

      document.getElementById('next3D').addEventListener('click', rotateNext);
      document.getElementById('prev3D').addEventListener('click', rotatePrev);

      // Auto-rotate cont√≠nuo
      setInterval(rotateNext, 3000);
    </script>  <script type="module">
        import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

        // üîπ Suas credenciais do Supabase
        const SUPABASE_URL ='https://ulxbfffiidjlartupase.supabase.co';
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVseGJmZmZpaWRqbGFydHVwYXNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwMDg5OTYsImV4cCI6MjA3MjU4NDk5Nn0.f3-wyXvWJtYR12sWD8bZNW0rFxmz-xq0BT8yuc8boWQ";

        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        

    

          async function carregarSobreNos() {
            const abtusText = document.getElementById('abtus');
            const abtusImg = document.getElementById('abtusImg');
            if (!abtusText) return;

            // fetch description and image url (url_img) from abtus
            const { data, error } = await supabase.from('abtus').select('descricao, url_img').limit(1).single();

            if (error) {
              console.error('Erro ao carregar texto de Sobre N√≥s:', error);
              abtusText.textContent = 'N√£o foi poss√≠vel carregar as informa√ß√µes.';
              return;
            }

            // set description text
            abtusText.textContent = (data && data.descricao) ? data.descricao : 'Informa√ß√µes n√£o encontradas.';

            // set image if available; otherwise keep existing src
            if (abtusImg && data) {
              if (data.url_img) {
                abtusImg.src = data.url_img;
              } else {
                // if no image provided, you may choose to hide the element or keep the placeholder
                // abtusImg.style.display = 'none';
              }
            }
          }

    // üî∏ Executar ao carregar a p√°gina
    document.addEventListener('DOMContentLoaded', () => {

      // Carrega conte√∫dos quando o DOM estiver pronto
      carregarSobreNos();
      carregarFAQ();
      carregarProdutosPromocao();
      carregarBanners();
    });
 

    async function carregarFAQ() {
  const container = document.getElementById("faqQ");
  container.innerHTML = "Carregando perguntas...";

  try {
    // üîç Busca os dados da tabela 'faq'
    const { data, error } = await supabase
      .from("faq")
      .select("question, answer"); // Removemos o .order por enquanto

    // üîπ Debug no console
    console.log("Resultado da query FAQ:", data);
    console.log("Erro da query FAQ:", error);

    if (error) {
      container.innerHTML = "<p>Erro ao carregar perguntas.</p>";
      return;
    }

    if (!data || data.length === 0) {
      container.innerHTML = "<p>Nenhuma pergunta encontrada.</p>";
      return;
    }

    // üß± Monta o HTML dinamicamente
    container.innerHTML = "";
    data.forEach(item => {
      const div = document.createElement("div");
      div.className = "faq-item";
      div.innerHTML = `
        <div class="question">${item.question}</div>
        <div class="answer">${item.answer}</div>
      `;
      
      // ‚úÖ Adiciona evento de clique para abrir/fechar resposta
      div.querySelector(".question").addEventListener("click", () => {
        div.classList.toggle("active");
      });

      container.appendChild(div);
    });

  } catch (err) {
    console.error("Erro geral ao carregar FAQ:", err);
    container.innerHTML = "<p>Erro ao carregar perguntas.</p>";
  }
}


      

  // carregarFAQ() agora √© chamado no DOMContentLoaded para garantir que o container exista
















const bannerCarousel = document.getElementById('bannerCarousel') || document.querySelector('.banner-carousel');

// Detecta se o dispositivo √© mobile
function detectarPlataforma() {
  return window.innerWidth <= 768 ? 'Mobile' : 'Desktop';
}

// Fun√ß√£o principal sem duplicar
async function carregarBanners() {
  if (!bannerCarousel) {
    console.warn('bannerCarousel n√£o encontrado.');
    return;
  }

  // Sempre limpa antes de carregar (evita duplica√ß√µes)
  bannerCarousel.innerHTML = '';

  const plataformaAtual = detectarPlataforma();

  try {
    // Busca j√° filtrando no servidor
    const { data, error } = await supabase
      .from('banners')
      .select('*')
      .eq('status', 'Ativo')
      .eq('plataforma', plataformaAtual)
      .order('id', { ascending: true });

    if (error) {
      console.error('Erro ao buscar banners:', error);
      bannerCarousel.innerHTML = '<p>Erro ao carregar banners.</p>';
      return;
    }

    // Se n√£o tiver nenhum banner, apenas exibe aviso
    if (!data || data.length === 0) {
      bannerCarousel.innerHTML = '<p>Nenhum banner encontrado.</p>';
      return;
    }

    // Renderiza SEM duplicar
    data.forEach((banner) => {
      const imageUrl = banner.url || banner.imagem || banner.image;
      if (!imageUrl) return;

      const div = document.createElement('div');
      div.className = 'banner-item';
      div.innerHTML = `<img src="${imageUrl}" alt="${banner.nome || 'Banner'}">`;
      bannerCarousel.appendChild(div);
    });

  } catch (e) {
    console.error('Erro geral ao carregar banners:', e);
    bannerCarousel.innerHTML = '<p>Erro ao carregar banners.</p>';
  }
}

// Recarrega ao mudar tamanho da tela SEM duplicar
let timeoutResize;
window.addEventListener('resize', () => {
  clearTimeout(timeoutResize);
  timeoutResize = setTimeout(() => {
    carregarBanners(); // recarrega uma vez s√≥
  }, 300);
});



   
      // get the promo carousel container (must match the HTML id we set)
      const nsei = document.getElementById('promoCarousel');

      async function carregarProdutosPromocao() {
        console.log('carregarProdutosPromocao: iniciando');
        if (!nsei) {
          console.error('Container de promo√ß√µes (#promoCarousel) n√£o encontrado no DOM.');
          return;
        }

        try {
          // üîπ Busca itens que est√£o em promo√ß√£o
          const { data, error } = await supabase
            .from('promocao')
            .select(`
              desconto,
              item: item_id(*)
            `);

          console.log('carregarProdutosPromocao: resultado raw', { data, error });

          if (error) {
            console.error('Erro ao carregar produtos em promo√ß√£o:', error);
            nsei.innerHTML = '<p>N√£o foi poss√≠vel carregar promo√ß√µes.</p>';
            return;
          }

          if (!data || data.length === 0) {
            nsei.innerHTML = '<p>Nenhuma promo√ß√£o encontrada.</p>';
            return;
          }

          nsei.innerHTML = ''; // Limpa antes de inserir

          data.forEach(registro => {
            const produto = registro.item || registro.item_id || {};
            const desconto = registro.desconto || 0;

            // defensiva: se n√£o houver produto, pula
            if (!produto || !produto.nome) return;

            // tenta v√°rias chaves para imagem (imagem / image / foto)
            const imgSrc = produto.imagem || produto.image || produto.foto || 'https://via.placeholder.com/300x180?text=Sem+Imagem';

            // Calcula o pre√ßo promocional com seguran√ßa
            const precoOriginal = Number(produto.preco) || 0;
            const precoPromocional = (precoOriginal * (1 - (Number(desconto) || 0) / 100)).toFixed(2);

            const card = document.createElement('div');
            card.classList.add('carousel-item');

            card.innerHTML = `
              <img src="${imgSrc}" alt="${produto.nome}" class="produto-imagem">
              <div class="produto-info">
                <h3>${produto.nome}</h3>
                <p>${produto.descricao || ''}</p>
                <p>
                  <span style="text-decoration: line-through; color: #fff;">R$ ${precoOriginal.toFixed(2)}</span>
                  <span style="color: black; font-weight: bold; margin-left: 10px;">R$ ${precoPromocional}</span>
                </p>
                <button class="botao-comprar" onclick="addToCart('${produto.nome}', '${precoPromocional}')">Comprar</button>
              </div>
            `;

            nsei.appendChild(card);
          });
        } catch (err) {
          console.error('Erro geral ao carregar produtos em promo√ß√£o:', err);
          nsei.innerHTML = '<p>Erro ao carregar promo√ß√µes.</p>';
        }
      }

        </script>

    <script type="module" src="comeco.js"></script>
    <script>
      // Helper to change page/footer/header colors from the console
      // Usage: setPageColors('#f5f5f5', '#AB2D0A')
      function setPageColors(pageBg, accent) {
        if (pageBg) document.documentElement.style.setProperty('--page-bg', pageBg);
        if (accent) {
          document.documentElement.style.setProperty('--accent', accent);
          // compute a hover tone by slightly brightening the accent (fallback)
          document.documentElement.style.setProperty('--accent-hover', accent);
        }
      }
      window.setPageColors = setPageColors;





// =========================
// CARRINHO LOCAL STORAGE
// =========================
let cart = JSON.parse(localStorage.getItem("cart")) || [];

function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

function addToCart(itemName, itemPrice) {
  const existingItem = cart.find(item => item.name === itemName);
  
  if (existingItem) {
    existingItem.qty += 1;
  } else {
    cart.push({ name: itemName, price: parseFloat(itemPrice), qty: 1 });
  }
  
  saveCart();
  document.getElementById("cartPanel").classList.add("open");
}

function renderCart() {
  const container = document.getElementById("cartItems");
  container.innerHTML = "";
  let total = 0;

  cart.forEach((item, index) => {
    const itemTotal = item.price * item.qty;
    total += itemTotal;
    
    container.innerHTML += `
      <div class="cart-item">
        <strong>${item.name}</strong><br>
        R$ ${parseFloat(item.price).toFixed(2)}<br>
        <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
          <button onclick="decreaseQty(${index})" style="background: #AB2D0A; color: #fff; border: none; padding: 5px 10px; cursor: pointer; border-radius: 4px;">-</button>
          <span style="font-weight: bold; min-width: 30px; text-align: center;">${item.qty}</span>
          <button onclick="increaseQty(${index})" style="background: #AB2D0A; color: #fff; border: none; padding: 5px 10px; cursor: pointer; border-radius: 4px;">+</button>
          <span style="margin-left: auto; font-weight: bold;">R$ ${itemTotal.toFixed(2)}</span>
        </div>
        <button onclick="removeCartItem(${index})" style="background: red; color: #fff; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; width: 100%; margin-top: 8px;">Remover</button>
      </div>
    `;
  });

  container.innerHTML += `
    <div style="border-top: 2px solid #ccc; margin-top: 15px; padding-top: 15px; font-weight: bold; font-size: 18px; text-align: right;">
      Total: R$ ${total.toFixed(2)}
    </div>
  `;
}

function increaseQty(index) {
  cart[index].qty += 1;
  saveCart();
}

function decreaseQty(index) {
  if (cart[index].qty > 1) {
    cart[index].qty -= 1;
    saveCart();
  } else {
    removeCartItem(index);
  }
}

function removeCartItem(index) {
  cart.splice(index, 1);
  saveCart();
}

// =========================
// ABRIR/FECHAR CARRINHO
// =========================
document.getElementById("openCart").onclick = () => {
  document.getElementById("cartPanel").classList.add("open");
};

document.getElementById("closeCart").onclick = () => {
  document.getElementById("cartPanel").classList.remove("open");
};

// =========================
// FINALIZAR PEDIDO VIA WHATSAPP
// =========================
document.getElementById("finishOrder").onclick = () => {
  const name = document.getElementById("userName").value.trim();
  const address = document.getElementById("userAddress").value.trim();
  const payment = document.getElementById("paymentMethod").value;

  if (!name || !address) {
    alert("Preencha nome e endere√ßo!");
    return;
  }

  if (cart.length === 0) {
    alert("O carrinho est√° vazio!");
    return;
  }

  let message = `*NOVO PEDIDO*\n\n`;
  message += `*Cliente:* ${name}\n`;
  message += `*Endere√ßo:* ${address}\n`;
  message += `*Pagamento:* ${payment}\n\n`;
  message += `*Itens:*\n`;
  let total = 0;

  cart.forEach(item => {
    const itemTotal = item.price * item.qty;
    total += itemTotal;
    message += `- ${item.name} (${item.qty}x R$ ${item.price.toFixed(2)} = R$ ${itemTotal.toFixed(2)})\n`;
  });

  message += `\n*Total: R$ ${total.toFixed(2)}*`;

  const phone = "5516997795333";
  const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;

  window.open(url, "_blank");
};

// render inicial
renderCart();


      
    </script>


<script>
// ====== TROCA DE LOGIN / LOGOUT ======

const loginBtn = document.querySelector('a[href="../../../../cadastro/login.html"]');
const logoutBtn = document.getElementById("logoutBtn");

// Se estiver logado
function atualizarHeader() {
  const isLoggedIn = localStorage.getItem("usuario_id");

  if (isLoggedIn) {
    // Usu√°rio logado ‚Üí mostra Logout, esconde Login
    if (loginBtn) loginBtn.style.display = "none";
    if (logoutBtn) logoutBtn.style.display = "block";
  } else {
    // Usu√°rio N√ÉO logado ‚Üí mostra Login, esconde Logout
    if (loginBtn) loginBtn.style.display = "block";
    if (logoutBtn) logoutBtn.style.display = "none";
  }
}

atualizarHeader();

// ====== FUN√á√ÉO DE LOGOUT =======
function logout() {
  localStorage.removeItem("usuario_id");
  localStorage.removeItem("emailUsuario");
  localStorage.removeItem("nomeUsuario");
  localStorage.removeItem("isLoggedIn");

  alert("Voc√™ saiu com sucesso!");

  window.location.reload(); // For√ßa atualizar o header
}

logoutBtn.addEventListener("click", logout);
</script>
  </body>
  </html>
